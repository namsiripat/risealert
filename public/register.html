<html>

<head>
    <title>RiseAlert : Register</title>


    <script>
        function MemberList() {
            var width = "450",
                height = "200";
            var left = (screen.width / 2) - width / 2;
            var top = (screen.height / 2) - height / 2;
            var styleStr = 'width=600,height=200,scrollbars=yes,status=yes,left=' + left + ',top=' + top + ',screenX=' +
                left + ',screenY=' + top;
            window.open("popup.html", "MemberList", styleStr);
        }
        function postData() {
            var xhr = new XMLHttpRequest();
            var url = "http://localhost:3000/patient";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // var json = JSON.parse(xhr.responseText);
                    // console.log(json.email + ", " + json.password);
                    window.location.href = "/"
                }
            };
            // let radio = document.getElementsByName('sex');
            let radioButton = Array.from(document.getElementsByName('sex'))
            // let sex = radioButton.find(button => button.checked === true)
            // alert(sex.value)
            // console.log(radios);
            // let radio = radioButton.filter(button => button.checked === true);
            // console.log(radio[0]);
            // let radioButton = radios.filter(button => button.checked === true);
            // console.log(radios);
            // var radios = document.getElementsByName('sex');
            // let sex = null;
            // for (var i = 0, length = radios.length; i < length; i++) {
            //     if (radios[i].checked) {
            //         sex = radios[i].value;
            //         alert(radios[i].value);
            //         break;
            //     }
            // }
            var e = document.getElementById("roomID");
            var data = JSON.stringify({
                "roomID": e.options[e.selectedIndex].value,
                "name": document.getElementById("name").value,
                "surname": document.getElementById("surname").value,
                "age": document.getElementById("age").value,
                "disease": document.getElementById("disease").value,
                "doctor": document.getElementById("doctor").value,
                "sex": radioButton.find(button => button.checked === true).value
            });
            xhr.send(data);
        }
    </script>

</head>

<body>
    <center>

        <div id="myForm" name="myForm">
        <!-- <form id="myForm" name="myForm"> -->
            <fieldset>
                <legend>Register Form</legend>
                <br />

                <table>
                    <tr>
                        <td>หมายเลขห้อง</td>
                        <td>
                            <select id="roomID">
                                <option selected>---เลือกหมายเลขห้อง---</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                                <option value=11>11</option>
                                <option value=12>12</option>
                                <option value=13>13</option>
                                <option value=14>14</option>
                                <option value=15>15</option>
                                <option value=16>16</option>
                                <option value=17>17</option>
                                <option value=18>18</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>ชื่อ</td>
                        <td>
                            <input id="name" name="name" />
                        </td>
                    </tr>
                    <tr>
                        <td>นามสกุล</td>
                        <td>
                            <input id="surname" name="surname">
                        </td>
                    </tr>
                    <tr>
                        <td>เพศ</td>
                        <td>
                            <input type="radio" name="sex" value="Male">ชาย
                            <input type="radio" name="sex" value="Female">หญิง
                        </td>
                    </tr>
                    <tr>
                        <td>อายุ</td>
                        <td>
                            <input id="age" name="age" />
                        </td>
                    </tr>
                    <tr>
                        <td>โรค</td>
                        <td>
                            <input id="disease" name="disease" />
                        </td>
                    </tr>
                    <tr>
                        <td>แพทย์ผู้รับผิดชอบ</td>
                        <td>
                            <input id="doctor" name="doctor" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <input type="submit" value="Save" onclick="postData();" />
                            <input type="reset" value="Cancel" />
                            <tr>
                                <td>
                                    <a href="index.html">Back</a>
                                </td>
                            </tr>
                        </td>
                    </tr>
                </table>
            </fieldset>
        <!-- </form> -->
        </div>

    </center>
</body>

</html>